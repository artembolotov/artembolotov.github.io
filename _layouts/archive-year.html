---
layout: default
---

{% include tag-menu.html active_tag="all" %}

<h1>Архив за {{ page.date | date: "%Y" }} год</h1>

<div class="posts">
{% assign months = "января,февраля,марта,апреля,мая,июня,июля,августа,сентября,октября,ноября,декабря" | split: "," %}
{% for post in page.posts %}
{% unless post.draft %}
  <article>
    <h2><a href="{{ post.url }}">{{ post.title }}</a></h2> 
    {% assign month_index = post.date | date: "%-m" | minus: 1 %}
    <time datetime="{{ post.date }}">{{ post.date | date: "%d" }} {{ months[month_index] }} {{ post.date | date: "%Y" }}</time>
    {% if post.description %}
    <p>{{ post.description }}</p>
    {% endif %}

    {% include reading-time.html content=post.content %}
  </article>
{% endunless %}
{% endfor %}
</div>

<!-- Навигация по месяцам -->
<nav class="archive-navigation">
  <h2>По месяцам:</h2>
  <ul>
    {% assign posts_by_month = page.posts | group_by_exp: "post", "post.date | date: '%Y-%m'" %}
    {% for month_posts in posts_by_month %}
      {% assign month_date = month_posts.name | append: "-01" | date: "%B %Y" %}
      {% assign month_number = month_posts.name | split: "-" | last %}
      {% assign month_index = month_number | minus: 1 %}
      <li>
        <a href="/blog/{{ page.date | date: "%Y" }}/{{ month_number | prepend: "00" | slice: -2, 2 }}/">
          {{ months[month_index] }} {{ page.date | date: "%Y" }} ({{ month_posts.items | size }})
        </a>
      </li>
    {% endfor %}
  </ul>
</nav>