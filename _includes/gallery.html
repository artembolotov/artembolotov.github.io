{% comment %}
Image gallery component - FIXED VERSION
Usage: {% include gallery.html images=gallery_images %}
{% endcomment %}

<div class="image-gallery">
  {% assign lines = include.images | strip | split: "
" %}
  {% assign image_count = 0 %}
  {% for line in lines %}
    {% assign trimmed_line = line | strip %}
    {% unless trimmed_line == "" %}
      {% assign image_count = image_count | plus: 1 %}
    {% endunless %}
  {% endfor %}
  
  <div class="image-gallery-inner" data-count="{{ image_count }}">
    {% for line in lines %}
      {% assign trimmed_line = line | strip %}
      {% unless trimmed_line == "" %}
        {% assign parts = trimmed_line | split: "|" %}
        {% assign image_path = parts[0] | strip %}
        {% assign image_alt = parts[1] | strip | default: "" %}
        <img src="{{ image_path }}" alt="{{ image_alt }}">
      {% endunless %}
    {% endfor %}
  </div>
</div>