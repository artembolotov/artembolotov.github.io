---
title: "RuStore на iPhone. Был ли прав Билан?"
description: "Как может работать обязательный российский магазин приложений на iOS и что будет с push-уведомлениями"
tags: [iosdev, notes]
image: /blog/img/2025-08-31-rustore-ios/rustore.png
draft: true
---

Возможно ли невозможное? С 1 сентября 2025 года в России вступает в силу закон, обязывающий производителей предустанавливать RuStore на все продаваемые устройства, включая iPhone. Как это можно реализовать на закрытой платформе iOS? И что будет с критически важными функциями вроде push-уведомлений?

{% include img.html src="rustore.png" alt="RuStore на iPhone?" %}

## Вода, не теки

Закон, подписанный президентом 7 июля 2025 года, запрещает производителям ограничивать установку приложений российских разработчиков и обязует установить наш отечественный магазин приложений. На бумаге всё выглядит просто: купил iPhone — получил RuStore, скачал спокойно сбербанк и всё остальное.
Но в реальности Apple не поставляет технику в Россию с марта 2022 года. Все iPhone в российских магазинах — это параллельный импорт через третьи страны. Возможен ли в таких условиях диалог?

## Европейский прецедент

В ЕС похожий закон — Digital Markets Act (DMA) — уже заставил Apple открыть iOS для альтернативных магазинов. С iOS 17.4 европейские пользователи могут устанавливать приложения из сторонних источников, но Apple создала настолько сложную систему ограничений, что CEO Epic Games назвал это «злонамеренным соответствием» (malicious compliance).

## Финансовые ловушки Apple

### Core Technology Fee — «налог на успех»

Apple ввела систему выбора для разработчиков в ЕС:

### Старая модель (App Store only):

- Стандартная комиссия 30%
- Никаких дополнительных сборов
- Только распространение через App Store

### Новая модель (альтернативные условия):

- Пониженные комиссии, но плата €0.50 за каждую установку свыше 1 млн в год
- Доступ к альтернативным магазинам и внешним платежам
- Пример: приложение с 2 млн пользователей заплатит €500,000 в год дополнительно

### Дополнительные комиссии в новой модели:

- 2% — за привлечение новых пользователей (первые 6 месяцев)
- 5-13% — сервисная комиссия магазина
- 5% — Core Technology Commission за внешние платежи

Итого в новой модели: до 20% комиссий + €500,000 фиксированно
В итоге для популярных приложений дешевле остаться на старых условиях с 30% комиссией App Store!

### Барьер входа для магазинов

Чтобы создать альтернативный магазин, нужно ЛИБО:

- Депозит €1,000,000 в банке с рейтингом A
- ИЛИ 2+ года в Apple Developer Program + 1+ млн установок в прошлом году

## Психологические и технические препятствия

### Пугающие предупреждения

Apple показывает множественные экраны:
```
⚠️ «Вы можете потерять защиту данных»
⚠️ «Apple не сможет помочь с возвратами»
⚠️ «Возможны проблемы с безопасностью»
```

### Географические ограничения

- Работает только в ЕС — система проверяет геолокацию
- Apple ID должен быть зарегистрирован в стране ЕС
- При выезде из ЕС функции могут перестать работать

### Сложная процедура установки

Пользователь должен:

1. Скачать файл с сайта разработчика
2. Подтвердить установку в Настройках
3. Пройти 3-4 экрана предупреждений
4. Разрешить установку в системных настройках
5. Подтвердить каждое приложение из магазина отдельно

### Скрытый контроль остаётся

Все альтернативные приложения обязательно проходят проверку Apple (Notarization). Apple может заблокировать любое приложение по своему усмотрению, сохраняя фактический контроль над экосистемой.

### Результат: формальное соответствие, практический провал

В апреле 2025 года Еврокомиссия оштрафовала Apple на €500 млн за несоответствие духу DMA, но технически Apple выполняет букву закона. Альтернативные магазины существуют, но их доля рынка остаётся мизерной из-за искусственных препятствий.

## RuStore на iPhone: возможные сценарии

Депутат Антон Горелкин [утверждает](https://tass.ru/ekonomika/24849423){:target="_blank"}, что российский магазин приложений RuStore может до конца 2025 года стать доступен в App Store и войти в список рекомендуемых к установке приложений при первом запуске устройств компании Apple. Рассмотрим технически возможные варианты:

### Сценарий 1: Apple идёт на уступки

- RuStore появляется как веб-приложение (PWA) с иконкой на рабочем столе
- При первой настройке iPhone предлагает «установить» RuStore
- Технически это будет закладка в Safari с расширенными возможностями

### Сценарий 2: Принудительная авторизация

- Apple создаёт специальный API для российского рынка
- RuStore получает те же права, что и App Store
- Приложения из RuStore проходят полную нотаризацию Apple

Правда пока Apple никогда не создавала исключения для отдельных стран в архитектуре iOS.

### Сценарий 3: Россиянам разрешат скачивать и устанавливать .app-файлы.

Мне кажется, для реализации такого подхода достаточно где-то «снять галочку», поскольку это прекрасно работает на Mac OS.

## Push-уведомления

### Нативные push-уведомления: монополия Apple

Push-уведомления в нативных iOS-приложениях работают исключительно через Apple Push Notification Service (APNS). Для их отправки нужны:

- Сертификат разработчика — привязан к Apple Developer Program аккаунту
- Bundle ID приложения — должен совпадать с зарегистрированным в Apple
- Действующая подписка Developer Program ($99/год)

### Web Push: новые возможности PWA

В марте 2023 года Apple добавила поддержку Web Push Notifications в iOS 16.4, что открыло новые возможности для веб-приложений:
- Работает без аккаунта Apple Developer Program
- Не привязан к App Store
- Используется стандарт W3C, совместимый с другими браузерами
- Может работать даже при заблокированном домене в App Store

### Ограничения Web Push на iOS:

- Требует добавления PWA на домашний экран
- Работает только при явном согласии пользователя
- Менее надёжная доставка по сравнению с APNS
- Нет поддержки rich notifications (изображения, кнопки действий)

В целом приложения в формате PWA могут получать push-уведомления, но с ограничениями по сравнению с нативными приложениями.

### Что происходит при блокировке аккаунта?

Вместе с удалением приложения из AppStore, Apple обычно блокирует аккаунт разработчика и отзывает push-сертификаты. Даже если приложение работает, push-уведомления зависят от действующего сертификата в Apple Developer Program. При блокировке аккаунта разработчика:

- Останавливается доставка push-уведомлений
- Приложение не может обновляться
- Новые пользователи не могут его установить

Вот почему авито, которое у вас ещё установлено, больше не получает уведомления.

## Технические препятствия для RuStore

### 1. Архитектура iOS

iOS принципиально построена как закрытая система. Каждое приложение должно пройти подпись Apple, иначе система откажется его запускать. Даже в ЕС альтернативные магазины работают через API, предоставленные самой Apple.

### 2. Sandboxing и права доступа

Приложения в iOS работают в изолированной среде. RuStore не сможет:

- Устанавливать другие приложения без участия системы
- Получать доступ к файлам других приложений
- Обходить системы безопасности

## Последствия для пользователей

Согласно закону, устройства без поддержки RuStore будут считаться технически некачественными, но прямого запрета на продажу iPhone нет. Это означает:

- Покупатели смогут вернуть iPhone как бракованный товар
- Продавцы рискуют получить претензии от Роспотребнадзора
- Но сами устройства продолжат поступать через параллельный импорт

## Прогноз: что получится на практике

Анализируя технические возможности и политические реалии, наиболее вероятным видится сценарий PWA-магазина с ограниченной функциональностью:

- RuStore как PWA — полноценное веб-приложение с возможностью установки на домашний экран
- Поддержка Web Push — базовые уведомления доступны, но с ограничениями
- Каталог PWA-приложений — российские разработчики смогут публиковать веб-приложения с push-поддержкой
- Обход Apple Developer Program — не требуются сертификаты Apple для базовой функциональности

### Преимущества такого подхода:

- Реальная техническая возможность реализации
- Независимость от решений Apple
- Кроссплатформенность (работает на Android и iOS)
- Возможность push-уведомлений через Web Push API

### Недостатки:

- Ограниченная интеграция с системой
- Менее надёжные push-уведомления
- Необходимость переписывания существующих нативных приложений

## Техническая реальность vs политические амбиции

История с RuStore на iPhone — яркий пример того, как политические решения сталкиваются с техническими реалиями. Даже в ЕС, где Apple была вынуждена открыть платформу, альтернативные магазины не смогли серьёзно потеснить App Store.

В российском случае ситуация ещё сложнее: нет прямого диалога с Apple, нет официальных поставок техники, а требования закона противоречат базовой архитектуре iOS.

Итог: Опыт ЕС показывает, что RuStore на iPhone скорее всего станет PWA-платформой с искусственными ограничениями. Apple создаст формальное соответствие российскому закону, но с системой препятствий (предупреждения, сложная установка, ограниченная функциональность), которая сделает альтернативный магазин малопривлекательным для массового пользователя.

Для российских разработчиков это означает необходимость инвестировать в веб-технологии как основную стратегию обхода монополии Apple, принимая при этом ограничения в пользовательском опыте по сравнению с нативными приложениями.

## Зачем так сложно?

Ну и главный вопрос: почему на той же MacOS можно спокойно скачать и установить *.app файл и пользоваться им, а на iPhone так же сделать не разрешают? Может для России всё же сделают исключение? Я уже зарегистрировал в RuStore аккаунт (за это не просят $99/год). Всё, что нужно для этого — учётная запись VK. В личном кабинете у вас даже не будет возможности редактировать информацию о себе — всё делается через почту поддержки. Но (на удивление) отвечают они моментально: мой вопрос решили минут за 10, в выходной день. И всё же надеюсь, мы вернёмся в мир, где не нужны ни RuStore, ни «Вжух»