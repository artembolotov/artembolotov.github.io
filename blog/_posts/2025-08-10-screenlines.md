---
title: "ScreenLines: моё новое приложение"
description: "Как простая белая линия зашла в App Store и обогнала «Парковки Москвы»"
tags: [notes, iosdev]
image: /blog/img/2025-08-10-screenlines/screenlines.png
draft: true
---

Как проблема с защитным стеклом превратилась в приложение, которое за 3 дня скачали 4000 человек.

![ScreenLines в App Store](/blog/img/2025-08-10-screenlines/preview.png)

{% capture gallery_test %}
/blog/img/2025-08-10-screenlines/preview.png|Первое фото
/blog/img/2025-05-28-reestr-po/reestr.png|Второе фото  
/blog/img/2024-08-20-samara/IMG_5771.jpeg|Третье фото
{% endcapture %}
{% include gallery.html images=gallery_test %}

{% capture gallery_appstore %}
/blog/img/2025-08-10-screenlines/ru_0.png
/blog/img/2025-08-10-screenlines/ru_1.png
/blog/img/2025-08-10-screenlines/ru_2.png
/blog/img/2025-08-10-screenlines/ru_3.png
/blog/img/2025-08-10-screenlines/ru_4.png
/blog/img/2025-08-10-screenlines/ru_5.png
{% endcapture %}
{% include gallery.html images=gallery_appstore %}

## Проблема, знакомая каждому

Черная рамка стекла, черная рамка телефона, вы пытаетесь на глаз определить, ровно ли легло стекло. Не очень ровно — отклеиваем и центруем заново. Может попасть пылинка — доставать или оставить?  Результат предсказуем: либо "съедена" часть экрана с одной стороны, либо видна белая полоска с другой. А переклеивать — это пыль, пузыри и испорченные нервы.

В сервисных центрах за эту процедуру берут от 500 до 2000 рублей. Да, существуют стекла с аппликаторами для точной установки. Но зачем переплачивать за одноразовую пластиковую рамку, которую сразу выбросишь? А что если решить проблему программно?

## От лайфхака к продукту

История началась банально. Очередное защитное стекло, очередная попытка наклеить "на глаз". И тут пришла простая мысль: а что если включить телефон? На экране же можно что-то отобразить!

Первая версия была примитивной — просто белый прямоугольник по размеру экрана, сохраненный в галерею. Открыл фото, приложил стекло так, чтобы белая рамка была видна равномерно по всем краям, прижал. Идеально!

![Дочь клеит стекло с помощью ScreenLines](/assets/images/screenlines/daughter-installing.jpg)
*Моя дочь успешно наклеивает стекло с первого раза*

Следующий этап — проверка гипотезы. Быстро написал простое приложение, которое показывает белый прямоугольник. Дал попробовать друзьям, даже тем, у кого "руки не из того места" (их слова). Результат поразил: все, абсолютно все смогли наклеить стекло идеально с первого раза.

## Путь от прямоугольника к App Store

Помню тот момент, когда понял, что простой прямоугольник может стать полноценным приложением. Но сразу возникли сомнения — пустят ли такое в App Store? Приложение выглядело слишком простым, буквально одна функция — показать белую линию.

Чтобы превратить идею в продукт, пришлось добавить:
- Полноценную инструкцию с пошаговым руководством
- Видео-туториал для наглядности
- Систему оценки результата с праздничным конфетти
- Сайт с калькулятором экономии

Отдельная история с правилами Apple. Формально, они запрещают использовать изображения устройств в скриншотах приложения. А для ScreenLines это было критически важно — как иначе показать процесс установки стекла? К счастью, это правило уже давно нарушают все подряд, и Apple смотрит на это сквозь пальцы.

Разработка началась в январе 2024 года параллельно с другими проектами. Казалось бы, что может быть проще — нарисовать белую линию? Но дьявол, как всегда, в деталях.

## Техническая реализация: Не так просто, как кажется

### Проблема радиусов скругления

У каждой модели iPhone свой радиус скругления экрана. От 0 у старых моделей до 62 пикселей у iPhone 16 Pro. 

```swift
// Each iPhone model has its own corner radius
extension Model {
    var screenCornerRadius: CGFloat {
        switch self {
        case .iPhone16Pro, .iPhone16ProMax: 62.0
        case .iPhone15Pro, .iPhone15ProMax: 55.0
        case .iPhone14Pro, .iPhone14ProMax: 55.0
        case .iPhone13, .iPhone13Pro: 47.33
        case .iPhone12Mini, .iPhone13Mini: 44.0
        // ... and so on for 50+ models
        }
    }
}
```

Забавно, что iOS может определить радиус скругления текущего устройства программно, но Apple запрещает использовать этот приватный метод. С таким кодом приложение просто не пустят в App Store. Пришлось создавать и поддерживать таблицу радиусов для всех моделей. И обновлять её с выходом каждого нового iPhone.

### Видео через HLS: Почему так сложно?

Казалось бы, встроить видео в приложение — что может быть проще? Но есть нюансы:

```swift
// HLS streaming instead of embedded video
let url = URL(string: "https://screenlines.app/video/tutorial-ru.m3u8")!
let player = AVPlayer(url: url)
```

Почему HLS, а не обычное видео в бандле приложения? 
- **Размер приложения** — всего 6 МБ вместо 50+
- **Гибкость** — можно заменить видео на лету, не выпуская обновление
- **Локализация** — разные видео для разных языков без раздувания приложения

### Мелочи, которые важны

**Предотвращение блокировки экрана** — пока пользователь клеит стекло, экран не должен гаснуть:

```swift
private func disableScreenAutoLocking() {
    UIApplication.shared.isIdleTimerDisabled = true
}
```

**Праздничное конфетти** — маленькая радость после успешной установки:

```swift
.withConfetti(counter: $viewModel.happyCounter)
```

### Архитектура

Приложение построено на SwiftUI с поддержкой iOS 15+:

- **SwiftUI + Combine** для UI и реактивности
- **AVKit** для видео-инструкций через HLS
- **Яндекс AppMetrica** для аналитики
- **Кастомная база моделей устройств** для определения параметров экрана
- **ConfettiSwiftUI** для того самого момента радости

![Архитектура приложения](/assets/images/screenlines/architecture.png)

## Сайт: Когда нейросети пишут код

Параллельно с приложением нужен был сайт. И тут началось самое интересное.

### Эволюция AI-помощников

Всё началось с ChatGPT — он создал базовую структуру сайта. Потом эстафету подхватили другие:

1. **ChatGPT** — начал проект, создал структуру
2. **DeepSeek** — помогал с оптимизацией JavaScript
3. **Qwen** — экспериментировали с анимациями
4. **Gemini** — пробовали для SEO-оптимизации
5. **Claude** — финальная версия, переписал почти всё

Почему остановились на Claude? Это оказался единственный инструмент, который подходит именно для работы, а не для развлечений. Да, у него есть раздражающие ограничения даже на платных тарифах, но результат того стоит.

### История с животными

Меня всегда забавлял типичный блок отзывов на лендингах: "Андрей, фото, должность, восторженный отзыв". Все же понимают, что эти отзывы высосаны из пальца, а люди, скорее всего, не существуют.

Поэтому решил пойти другим путём — пусть отзывы оставляют животные! Кошка Луна, Щенок Топик, Кролик Бургер, Панда Лапочка, Лисичка Искринка и Енот Полоскунчик. По крайней мере, это честно и забавно.

![Енот устанавливает стекло](/assets/images/screenlines/raccoon-hero.png)
*Тот самый енот, нарисованный ChatGPT*

С енотом вышло случайно. Где-то увидел картинку и подумал: "А почему бы и нет?" Тогда как раз был пик развлечений с генеративными нейросетями, все пробовали что-то нарисовать. ChatGPT справился на отлично — енот получился милым и запоминающимся.

### Калькулятор экономии

Интересно, что идею калькулятора предложил Claude. Простая, но эффективная штука — показывает, сколько можно сэкономить за год:

```javascript
// Device pricing database
const devices = [
    { "model": "iPhone 16 Pro", "serviceCost": 2000, "selfCost": 700 },
    { "model": "iPhone 16 Pro Max", "serviceCost": 2000, "selfCost": 550 },
    // ... more devices
]

// Calculate annual savings
const totalSavings = totalServiceCost - totalSelfCost
```

## Результаты: Цифры, которые радуют

- **34 место** в рейтинге утилит App Store России
- **3000+ пользователей** за первые 3 дня
- **Обогнали** "Парковки Москвы" и "Столото" в рейтинге
- **География**: Россия, Нидерланды, Германия, США
- **Средняя оценка**: 5.0 (правда, пока мало отзывов)

![График роста пользователей](/assets/images/screenlines/user-growth.png)

## Технические уроки

1. **Простота != Примитивность** — даже белая линия требует продуманной реализации
2. **Детали решают** — поддержка всех моделей устройств критически важна
3. **AI ускоряет, но не заменяет** — нейросети отлично помогают, но финальная доводка всё равно ручная
4. **Нативность важна** — SwiftUI даёт ощущение "родного" приложения
5. **Правила Apple гибкие** — иногда можно найти обходные пути

## Выводы

ScreenLines — это история о том, как:
- Бытовая проблема может стать продуктом
- Простое решение часто лучшее решение
- MVP можно проверить картинкой из галереи
- Нейросети реально ускоряют разработку
- Всегда есть место для простых, но полезных приложений

Проект показал, что не обязательно изобретать революционные технологии. Иногда достаточно просто решить маленькую, но раздражающую проблему элегантным способом.

А ещё это доказательство того, что один человек с MacBook может создать продукт, который обгонит в рейтингах (хоть и на время) приложения крупных компаний.

---

**P.S.** Если дочитали до конца и у вас iPhone — попробуйте [ScreenLines](https://apps.apple.com/app/id6739783494){:target="_blank"}. Это бесплатно.

**P.P.S.** Енот с сайта передаёт привет 👋

---

## Ссылки

- [ScreenLines в App Store](https://apps.apple.com/app/id6739783494){:target="_blank"}
- [Сайт проекта](https://screenlines.app){:target="_blank"}

## Технологии

`Swift`, `SwiftUI`, `iOS`, `JavaScript`, `HTML/CSS`, `ChatGPT`, `Claude`, `Яндекс AppMetrica`, `HLS`