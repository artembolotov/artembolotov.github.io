---
title: "ScreenLines: обгоняем Столото и Парковки Москвы. Моё новое приложение"
description: "Решаем маленькую проблему и попадаем в топ-40 App Store за 3 дня. В конце статьи секрет."
tags: [iosdev, notes]
image: /blog/img/2025-08-10-screenlines/screenlines.png
draft: true
---

4700 скачиваний за три дня. 34 место в топе утилит App Store России. [Приложение недели](https://x.com/ios_dev_alb/status/1956656538841477335){:target="_blank"} в сообществе [Indie iOS Apps](https://x.com/ios_dev_alb/status/1956656538841477335?s=46&t=XX_GDAhHPLfRalDTeluI4w){:target="_blank"}. И всё это — приложение, которое просто показывает белую линию на экране.

{% capture gallery_appstore %}
ru_0.png
ru_1.png
ru_2.png
ru_3.png
ru_4.png
ru_5.png
{% endcapture %}
{% include gallery.html images=gallery_appstore %}

## Простая, но регулярная проблема

В моей семье 5 айфонов и 2 айпада. Ещё есть родители. Все берегут (пытаются) телефоны: всем нужно защитное стекло. И мне казалось, что я нормально эти стёкла клею. Задача сводится к трём действиям: очистить экран, не допустить пыль и ровно разместить стекло. Но чёрные рамки стекла, чёрные рамки телефона. И вот, стекло немного съело часть изображения. Отклеиваем, центруем заново. Поскольку я бывший перфекционист, всегда казалось что стекло лежит немного неровно. А если попадала пылинка, приподнимал стекло и доставал её.

В сервисных центрах за эту процедуру берут от 500 до 2000 рублей, но и там стёкла ставят «на глазок». Да, да, возможно, именно вы можете наклеить стекло идеально. Но зачем-то используют строительные уровни вместо верёвок с грузами, а ещё существуют стёкла с аппликаторами. Но зачем переплачивать за одноразовую пластиковую рамку (вы же понимаете, что она стоит каких-то денег, не гарантирует идеальный результат, но точно займёт место в вашем мусорном ведре)? А что если решить проблему программно?

Хотелось иметь на экране какой-то ориентир для выравнивания стекла. Я нарисовал белый прямоугольник под размер экрана и сохранил его в галерею. Открыл фото, приложил стекло так, чтобы белая рамка была видна равномерно, прижал. Идеально!

## От лайфхака к продукту

Проверил гипотезу на друзьях и детях. Даже те, у кого «руки не из того места» (их слова), смогли наклеить стекло идеально с первого раза.

{% include img.html src="veronika.png" alt="Ребёнок клеит стекло с помощью ScreenLines" caption="Вероника успешно клеит стекло с первого раза" %}

Понял, что простой прямоугольник может стать приложением. Но сразу сомнения — пустят ли в App Store? Слишком просто: одна функция — показать белую линию.

Поэтому докрутим до продукта и добавим:
- Пошаговую инструкцию с видео-туториалом
- Систему оценки результата с конфетти
- Полноценный сайт с калькулятором экономии, политикой конфиденциальности, условиями использования
- Поддержку всех iPhone и iPad

Разработка началась в январе 2024 года. Казалось бы, что сложного — нарисовать линию?

## Техническая кухня

### 80 моделей — 80 радиусов

Белая линия должна идеально повторять радиус скругления iPhone. iOS может определить радиус программно, но Apple запрещает использовать приватные методы. Спасибо, что можно получить идентификатор модели: например, `iPhone17,1` — это iPhone16 Pro, `iPhone17,5` — iPhone 16e. Для 11 дюймового iPad Air на M3 сразу четыре идентификатора: `iPad15,3`, `iPad15,4`, `iPad15,5`, `iPad15,6`.

Поэтому делаем таблицу радиусов. Выглядит она примерно так: 

```swift
extension Model {
    var screenCornerRadius: CGFloat {
        switch self {    
        // ... 
        case .iPhone12ProMax, .iPhone13ProMax, .iPhone14Plus: 53.33
            
        case .iPhone12Mini, .iPhone13Mini: 44.0
                
        case .iPhone14Pro, .iPhone14ProMax, .iPhone15, .iPhone15Plus,
                .iPhone15Pro, .iPhone15ProMax, .iPhone16, .iPhone16Plus: 55.0
            
        case .iPhone16Pro, .iPhone16ProMax: 62.0
        // ... 
```

### HLS вместо встроенного видео

Одно из ключевых технических решений в ScreenLines — использование HLS (HTTP Live Streaming) для видеоинструкции вместо обычного встроенного файла.

HLS — это протокол потокового видео, разработанный Apple. Вместо одного большого файла видео разбивается на множество коротких сегментов (обычно по 6-10 секунд), которые загружаются по мере необходимости. Каждый сегмент — это обычный .ts файл, а .m3u8 содержит список всех сегментов и метаданные.

Почему не просто файл в приложении?
- **Размер**: 6 МБ вместо 50+
- **Гибкость**: можно обновить видео без релиза
- **Локализация**: разные языки без раздувания

HLS разбивает видео на короткие сегменты по 6-10 секунд. Вместо загрузки всего файла AVPlayer подгружает только нужные части:

- **Сегментация**: Видео нарезается на мелкие кусочки
- **Адаптация**: Плеер автоматически выбирает качество под скорость сети
- **Кэширование**: Просмотренные сегменты остаются в памяти

### Важные мелочи

**Экран не должен гаснуть** — пока клеишь стекло:

```swift
private func disableScreenAutoLocking() {
    UIApplication.shared.isIdleTimerDisabled = true
}
```

**Конфетти за успех** — радуем пользователей:

```swift
.withConfetti(counter: $viewModel.happyCounter)
```

{% include img.html src="confetti.png" %}

## Когда ИИ пишет сайт

Параллельно нужен был сайт. Тут началось интересное.

### Эволюция помощников

Параллельно нужен был сайт. Попробовал ChatGPT, DeepSeek, Qwen, Gemini — все изображали бурную деятельность, но результат был так себе.
[Claude](https://claude.ai){:target="_blank"} оказался единственным, кто подходит для работы. Давно купил подписку и сейчас использую его во всех проектах. Даже на платной версии есть лимиты на количество сообщений — иногда приходится ждать обновления. Но результат стоит того.

С енотом, кстати, вышло случайно — просили разные нейросети рисовать что-то абсурдное. ChatGPT предложил такую идею.

{% capture gallery_racoon %}
racoon_1.png
racoon_2.png
racoon_3.png
{% endcapture %}
{% include gallery.html images=gallery_racoon %}

### Калькулятор экономии

Claude предложил калькулятор — простую, но эффективную штуку. Составили таблицу устройств с ценами и простейшей математикой.

```javascript
// Device pricing database
const devices = [
    { "model": "iPhone 16 Pro", "serviceCost": 2000, "selfCost": 700 },
    { "model": "iPhone 16 Pro Max", "serviceCost": 2000, "selfCost": 550 },
    // ... more devices
]

// Calculate annual savings
const totalSavings = totalServiceCost - totalSelfCost
```

## Результаты взлёта

- **4700 скачиваний** за первые 3 дня
- **34 место** в топе утилит App Store России  
- **Обогнали** «Парковки Москвы» и «Столото»
- **География**: Россия, Нидерланды, Германия, США
- **Оценка**: 4.9

Приложение попало в топ за три дня. Без затрат на продвижение.

{% capture gallery_results %}
results_1.png
results_2.png
results_3.png
results_4.png
{% endcapture %}
{% include gallery.html images=gallery_results %}

А ещё получило звание [Indie App of the Week](https://x.com/ios_dev_alb/status/1956656538841477335){:target="_blank"}

{% capture gallery_indie %}
indie_0.png
indie_1.png
{% endcapture %}
{% include gallery.html images=gallery_indie %}

### Отзывы

Что пишут пользователи:

{% capture gallery_reviews %}
reviews_0.png
reviews_1.png
reviews_2.png
reviews_3.png
{% endcapture %}
{% include gallery.html images=gallery_reviews %}

## Что дальше?
С MacBook и терпением можно создать продукт, который обгонит приложения крупных компаний. Да, вам не обязательны дизайнеры, аудиторы и куча бюрократии. Не нужно согласовывать ни с кем ничего. Просто делайте.
ScreenLines показал: в App Store всегда есть место для простых, но полезных решений. Не обязательно создавать сложные платформы — иногда достаточно элегантно решить одну проблему.
Но дело не только в этом. Я же обещал раскрыть секрет. Приложение вряд ли так быстро вылезло в топ, если бы о нём не рассказал блогер с аудиторией 788000 подписчиков. 

{% capture gallery_marketing %}
marketing_1.jpg
marketing_2.png
marketing_3.png
marketing_4.png
{% endcapture %}
{% include gallery.html images=gallery_marketing %}

Если приложение висит в топе, значит его кто-то скачивает. А это результат продвижения и маркетинга, вкладывания денег, высчитывания стоимости одного пользователя и закладывания этой стоимости в подписку. И это то, что я вообще не люблю.

---

**P.S.** Если у вас iPhone — попробуйте [ScreenLines](https://apps.apple.com/app/id6739783494){:target="_blank"}. Бесплатно.

**P.P.S.** Енот передаёт привет 👋

---

## Зачем защищать экран

Наклеено ли на вашем телефоне защитное стекло? Если нет — вы рискуете экраном каждый день. Apple постоянно говорит о «революционно прочном стекле»: в iPhone 12 появился Ceramic Shield (гибрид стекла и керамики), в iPhone 16 та же технология стала «на 50% прочнее». Но «крепче предыдущего» совсем не означает, что стекло не бьётся и не царапается.
Да, от серьёзного удара защитное стекло может и не спасти, но ключи в кармане, песчинки и мелкая пыль больше не будут угрожать экрану. Некоторым не нравятся защитные стёкла, хотя сейчас без проблем можно купить подходящий вариант: от тонких до ультрапрочных, от бюджетных до премиальных. А установка стала проще благодаря [ScreenLines](https://screenlines.app){:target="_blank"}.

## Ссылки

- [ScreenLines в App Store](https://apps.apple.com/app/id6739783494){:target="_blank"}
- [Сайт проекта](https://screenlines.app){:target="_blank"}